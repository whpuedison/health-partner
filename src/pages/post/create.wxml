<!--pages/post/create.wxml-->
<view class="create-page">
  <view class="form-section">

    <view wx:if="{{powerEnable === 1}}">
      <view class="form-item">
        <textarea
          class="content-input"
          placeholder="è®°å½•ä½ çš„å¥åº·ç”Ÿæ´»..."
          value="{{content}}"
          bindinput="onContentInput"
          maxlength="500"
          show-confirm-bar="{{false}}"
        ></textarea>
        <view class="char-count">{{content.length}}/500</view>
      </view>


      <view class="form-item">
        <view class="images-section">
          <view class="images-grid">
            <view
              class="image-item"
              wx:for="{{images}}"
              wx:key="*this"
              wx:for-item="img"
              wx:for-index="index"
            >
              <image
                class="image-preview"
                src="{{img}}"
                mode="aspectFill"
                data-url="{{img}}"
                bindtap="previewImage"
              ></image>
              <view class="image-delete" data-index="{{index}}" bindtap="deleteImage">âœ•</view>
            </view>
            <view
              class="image-add"
              wx:if="{{images.length < 9}}"
              bindtap="chooseImages"
            >
              <text class="add-icon">ğŸ“·</text>
              <text class="add-text">æ·»åŠ å›¾ç‰‡</text>
            </view>
          </view>
        </view>
      </view>
    </view>

    <view wx:else class="form-item">
      <view class="status-picker-section">
        <picker mode="selector" range="{{exerciseStatuses}}" bindchange="onStatusSelect">
          <view class="picker">
            <text class="picker-label">é”»ç‚¼çŠ¶æ€</text>
            <text class="picker-value" wx:if="{{selectedStatus}}" style="color: #2D3748;">{{selectedStatus}}</text>
            <text class="picker-placeholder" wx:else></text>
          </view>
        </picker>
      </view>
    </view>

  </view>

  <view class="footer-bar">
    <button 
      class="publish-btn" 
      bindtap="publishPost"
      disabled="{{uploading || !canPublish}}"
    >
      {{uploading ? 'å‘å¸ƒä¸­...' : 'å‘å¸ƒ'}}
    </button>
  </view>
</view>
